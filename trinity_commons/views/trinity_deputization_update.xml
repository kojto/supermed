<odoo>
	<data>
		<!-- List Views -->
		<record model="ir.ui.view" id="view_trinity_deputization_update_list">
			<field name="name">trinity.deputization.update.list</field>
			<field name="model">trinity.deputization.update</field>
			<field name="arch" type="xml">
				<list limit="100" sample="1" default_order="deputization_update_lrn desc">
					<!-- User related fields -->
					<field name='user_id' string='Текущ потребител' optional='hide'/>
					<field name='user_token_expiresOnDatetime' string='Срок на изтичане на токена' optional='hide'/>
					<field name='user_token_certificate' string='Сертификат за токен' optional='hide'/>
					<!-- Company related fields -->
					<field name='company_id' string='Компания' optional='hide'/>
					<field name='company_vat' string='ДДС номер' optional='hide'/>
					<field name='company_name' string='Име на компанията' optional='hide'/>
					<!-- Deputization fields -->
					<field name="deputization_update_lrn"/>
					<field name="performer_pmi"/>
					<field name="performer_pmiDeputy"/>
					<field name="performer_qualification_code"/>
					<field name="performer_qualification_code_nhif"/>
					<field name="performer_role"/>
				</list>
			</field>
		</record>

		<!-- Form Views -->
		<record model="ir.ui.view" id="view_trinity_deputization_update_form">
			<field name="name">trinity.deputization.update.form</field>
			<field name="model">trinity.deputization.update</field>
			<field name="arch" type="xml">
				<form>
					<link rel="stylesheet" type="text/css" href="/trinity_file_assets/static/src/css/custom.css"/>
					<sheet>
						<div class="d-flex justify-content-end" groups="trinity_medical_facility.group_trinity_doctor_users">
							<button name="getToken" string="Изгради връзка с НЗИС" type="object" class="btn btn-outline-danger btn-md d-none" onclick="getToken()" style="margin: 20px;" invisible="C014 != False"/>
							<button name="post_token_api_request" string="post_token_api_request" type="object" class="d-none" style="margin: 20px;"/>
							<button name="getSignatureC013" string="Регистрирай заместване" type="object" class="btn btn-outline-primary btn-md d-none" style="margin: 20px;" onclick="getSignatureC013()" invisible="C014 != False"/>
							<button name="C013_api_request" string="Активирай" type="object" class="d-none" style="margin: 20px;"/>
						</div>
						<div class="oe_title">
							<h1>Регистрирай заместване</h1>
						</div>
                        <div class="row">
                            <group class="col-lg-6">
                                <separator class="col-lg-12 separator"/>
                                <field name="performer_pmi" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
                                <field name="performer_qualification_code"/>
                                <field name="performer_qualification_code_nhif"/>
                            </group>
                            <group class="col-lg-6">
                                <separator class="col-lg-12 separator"/>
                                <field name="performer_pmiDeputy" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
                                <field name="performer_pmiDeputy_qualification_code"/>
                                <field name="performer_pmiDeputy_qualification_code_nhif"/>
                                <field name="performer_role"/>
                            </group>
                            <group class="col-lg-6">
                                <separator class="col-lg-12 separator"/>
                                <field name="startDate"/>
                                <field name="endDate"/>
                                <field name="include"/>
                            </group>
                            <separator class="col-lg-12 separator"/>
                            <group class="col-lg-12 d-none" string="Допълнителни кодове">
                                <field name="C013" string="C013"/>
                                <field name="C013_signed" string="C013 подписан"/>
                                <field name="SignedInfo_C013" string="Подписана информация C013"/>
                                <field name="SignedInfo_C013_signature" string="Подпис C013"/>
                                <field name="C014" string="C014"/>
                                <field name="user_token_certificate" id="user_token_certificate" widget="text"/>
                                <field name="supermed_certificate" id="supermed_certificate" widget="text"/>
                                <field name="tokenRequest" id="tokenRequest" widget="text" string="tokenRequest"/>
                                <field name="SignedInfo_tokenRequest" id="SignedInfo_tokenRequest" widget="text" string="SignedInfo_tokenRequest"/>
                                <field name="SignedInfo_tokenRequest_signature" id="SignedInfo_tokenRequest_signature" widget="text" string="SignedInfo_tokenRequest_signature"/>
                                <field name="tokenRequest_signed" id="tokenRequest_signed" widget="text" string="tokenRequest_signed"/>
                                <field name="tokenResponse" id="tokenResponse" widget="text" string="tokenResponse"/>
                                <field name="user_id" id="user_id" string="user_id"/>
                                <field name="user_token_expiresOnDatetime" id="user_token_expiresOnDatetime" string="user_token_expiresOnDatetime"/>
                                <field name="company_id" string="ID на компанията"/>
                                <field name="company_vat" string="ДДС номер"/>
                                <field name="company_name" string="Име на компанията"/>
                            </group>
                        </div>
					</sheet>
				<script type="text/javascript" src="/trinity_file_assets/static/src/js/getToken.js"></script>
				<script type="text/javascript" src="/trinity_file_assets/static/src/js/getSignature.js"></script>
				<script type="text/javascript" src="/trinity_file_assets/static/src/js/getSignatureNhifMessages.js"></script>
				</form>
			</field>
		</record>

		<!-- Search Views -->
		<record model="ir.ui.view" id="view_trinity_deputization_update_search">
			<field name="name">trinity.deputization.update.search</field>
			<field name="model">trinity.deputization.update</field>
			<field name="arch" type="xml">
				<search string="medical">
					<field name='deputization_update_lrn'/>
					<field name='performer_pmi'/>
				</search>
			</field>
		</record>
		<!-- Actions to Return Model Views -->
		<record model="ir.actions.act_window" id="action_trinity_deputization_update">
			<field name="name">Регистрирай заместник</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">trinity.deputization.update</field>
			<field name="view_mode">list,form</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">Регистрирай заместник</p>
			</field>
		</record>
		<!-- Menu Items -->
		<menuitem name="Регистрирай заместник" parent="menu_trinity_commons" id="menu_deputization_update" action="action_trinity_deputization_update" sequence="10"/>
	</data>
</odoo>
