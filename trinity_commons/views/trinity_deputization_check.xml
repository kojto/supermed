<odoo>
	<data>
		<!-- List Views -->
		<record model="ir.ui.view" id="view_trinity_deputization_check_list">
			<field name="name">trinity.deputization.check.list</field>
			<field name="model">trinity.deputization.check</field>
			<field name="arch" type="xml">
				<list limit="100" sample="1" default_order="deputization_check_lrn desc">
					<!-- User related fields -->
					<field name='user_id' string='Текущ потребител' optional='hide'/>
					<field name='user_token_expiresOnDatetime' string='Срок на изтичане на токена' optional='hide'/>
					<field name='user_token_certificate' string='Сертификат за токен' optional='hide'/>
					<!-- Company related fields -->
					<field name='company_id' string='Компания' optional='hide'/>
					<field name='company_vat' string='ДДС номер' optional='hide'/>
					<field name='company_name' string='Име на компанията' optional='hide'/>
					<!-- Deputization fields -->
					<field name="deputization_check_lrn"/>
					<field name="performer_pmi"/>
				</list>
			</field>
		</record>

		<!-- Form Views -->
		<record model="ir.ui.view" id="view_trinity_deputization_check_form">
			<field name="name">trinity.deputization.check.form</field>
			<field name="model">trinity.deputization.check</field>
			<field name="arch" type="xml">
				<form>
					<link rel="stylesheet" type="text/css" href="/trinity_file_assets/static/src/css/custom.css"/>
					<sheet>
						<div class="d-flex justify-content-end" groups="trinity_medical_facility.group_trinity_medical_facility_users">
							<button name="getToken" string="Изгради връзка с НЗИС" type="object" class="btn btn-outline-danger btn-md d-none" onclick="getToken()" style="margin: 20px;" invisible="C016 != False"/>
							<button name="post_token_api_request" string="post_token_api_request" type="object" class="d-none" style="margin: 20px;"/>
							<button name="getSignatureC015" string="Провери заместване" type="object" class="btn btn-outline-primary btn-md d-none" style="margin: 20px;" onclick="getSignatureC015()" invisible="C016 != False"/>
							<button name="C015_api_request" string="Активирай" type="object" class="d-none" style="margin: 20px;"/>
						</div>
						<div class="oe_title">
							<h1>Провери заместване</h1>
						</div>
						<separator class="col-lg-12 separator"/>
						<group class="col-lg-6 d-none">
							<field name="deputization_check_lrn"/>
						</group>
						<group class="col-lg-6">
							<field name="performer_pmi" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
						</group>
						<group class="col-lg-6" invisible="deputizationResponce == False">
							<field name="deputizationResponce"/>
						</group>
						<!-- Additional Codes -->
						<group class="col-lg-12 d-none" string="Допълнителни кодове">
							<!-- C015 fields -->
							<field name="C015" string="C015"/>
							<field name="C015_signed" string="C015 подписан"/>
							<field name="SignedInfo_C015" string="Подписана информация C015"/>
							<field name="SignedInfo_C015_signature" string="Подпис C015"/>
							<field name="C016" string="C016"/>
							<!-- Token fields -->
							<field name="user_token_certificate" id="user_token_certificate" widget="text"/>
							<field name="supermed_certificate" id="supermed_certificate" widget="text"/>
							<field name="tokenRequest" id="tokenRequest" widget="text" string="tokenRequest"/>
							<field name="SignedInfo_tokenRequest" id="SignedInfo_tokenRequest" widget="text" string="SignedInfo_tokenRequest"/>
							<field name="SignedInfo_tokenRequest_signature" id="SignedInfo_tokenRequest_signature" widget="text" string="SignedInfo_tokenRequest_signature"/>
							<field name="tokenRequest_signed" id="tokenRequest_signed" widget="text" string="tokenRequest_signed"/>
							<field name="tokenResponse" id="tokenResponse" widget="text" string="tokenResponse"/>
							<field name="user_id" id="user_id" string="user_id"/>
							<field name="user_token_expiresOnDatetime" id="user_token_expiresOnDatetime" string="user_token_expiresOnDatetime"/>
							<field name="company_id" string="ID на компанията"/>
							<field name="company_vat" string="ДДС номер"/>
							<field name="company_name" string="Име на компанията"/>
						</group>
					</sheet>
                    <script type="text/javascript" src="/trinity_file_assets/static/src/js/getToken.js"></script>
                    <script type="text/javascript" src="/trinity_file_assets/static/src/js/getSignature.js"></script>
                    <script type="text/javascript" src="/trinity_file_assets/static/src/js/getSignatureNhifMessages.js"></script>
				</form>
			</field>
		</record>

		<!-- Search Views -->
		<record model="ir.ui.view" id="view_trinity_deputization_check_search">
			<field name="name">trinity.deputization.check.search</field>
			<field name="model">trinity.deputization.check</field>
			<field name="arch" type="xml">
				<search string="medical">
					<field name='deputization_check_lrn'/>
					<field name='performer_pmi'/>
				</search>
			</field>
		</record>
		<!-- Actions to Return Model Views -->
		<record model="ir.actions.act_window" id="action_trinity_deputization_check">
			<field name="name">Провери заместник</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">trinity.deputization.check</field>
			<field name="view_mode">list,form</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">Провери заместване</p>
			</field>
		</record>
		<!-- Menu Items -->
		<menuitem name="Провери заместване" parent="menu_trinity_commons" id="menu_deputization_check" action="action_trinity_deputization_check" sequence="10"/>
	</data>
</odoo>
