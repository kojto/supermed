<odoo>
	<data>
		<!-- List Views -->
		<record model="ir.ui.view" id="view_trinity_referral_issue_template_list">
			<field name="name">trinity.referral.issue.template.list</field>
			<field name="model">trinity.referral.issue.template</field>
			<field name="arch" type="xml">
				<list limit="100" sample="1">
					<field name='name'/>
					<field name='referral_category_name' string='Категория'/>
					<field name='referral_type' string='Тип направление'/>
					<field name='referral_qualification_name' string='Специалност'/>
					<field name='laboratory_code' string='Лабораторен код'/>
					<field name='specializedActivities_code' string='ВС дейност'/>
				</list>
			</field>
		</record>

		<!-- Form Views -->
		<record model="ir.ui.view" id="view_trinity_referral_issue_template_form">
			<field name="name">trinity.referral.issue.template.form</field>
			<field name="model">trinity.referral.issue.template</field>
			<field name="arch" type="xml">
				<form>
					<link rel="stylesheet" type="text/css" href="/trinity_file_assets/static/src/css/custom.css"/>
					<sheet>
						<div class='row mt-1'>
                            <group class='col-lg-12'>
                                <field name="name"/>
                                <field name="referral_issue_id" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}" string="Създаден от направление"/>
                            </group>
                        </div>
						<div class='row'>
							<group class='col-lg-6'>
                                <separator class='col-lg-12 separator'/>
								<field name='referral_category' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
								<field name='referral_type' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
								<field name='referral_financingSource' widget="input" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
							</group>
							<group invisible="referral_category_key != 'R1'" class='col-lg-6'>
                                <separator class='col-lg-12 separator'/>
								<field name='laboratory_code_root' string='Лабораторен код' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}" domain="[('meta_nhif_code', '!=', '---')]"/>
								<field name='laboratory_code' string='НЗОК код'/>
							</group>
							<group invisible="referral_category_key != 'R2'" class='col-lg-6'>
                                <separator class='col-lg-12 separator'/>
								<field name='referral_qualification' string='Код на специалност' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
								<field name='referral_qualification_nhif' string='Специалност по НЗОК' readonly="1"/>
								<field name='referral_qualification_name' string='Име на специалност' readonly="1"/>
							</group>
							<group invisible="referral_category_key != 'R3'" class='col-lg-6'>
                                <separator class='col-lg-12 separator'/>
								<field name='referral_qualification' string='Код на специалност' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
								<field name='referral_qualification_name' string='Специалност'/>
								<field name='referral_qualification_nhif' string='Специалност по НЗОК'/>
								<field name='specializedActivities_code_root' string='Специализирана дейност'/>
							</group>
							<group invisible="referral_category_key != 'R4'" class='col-lg-6'>
                                <separator class='col-lg-12 separator'/>
								<field name='hospitalization_admissionType' string='Тип на прием в болница' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
								<field name='hospitalization_directedBy' string='Изпратен от' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
								<field name='hospitalization_clinicalPathway' string='Клинична пътека' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
								<field name='hospitalization_outpatientProcedure' string='Амбулаторна процедура' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
							</group>
							<group invisible="referral_category_key != 'R5'" class='col-lg-6'>
                                <separator class='col-lg-12 separator'/>
								<field name='referral_qualification_name' string='Име на специалност'/>
								<field name='referral_qualification' string='Сециалност'/>
								<field name='referral_qualification_nhif' string='НЗОК код специалност'/>
								<field name='medicalExpertise_examType' string='Тип на изследване'/>
							</group>
							<group invisible="referral_category_key != 'R8'" class='col-lg-6'>
                                <separator class='col-lg-12 separator'/>
								<field name='workIncapacity_reason' string='Причина'/>
								<field name='workIncapacity_addressType' string='Адрес'/>
								<field name='workIncapacity_isHomeVisitNecessary' string='Домашно посещение?'/>
								<field name='employer_name' string='Работодател'/>
								<field name='employer_identificationCode' string='ЕИК:'/>
								<field name='employer_position' string='Позиция при работодателя'/>
								<field name='employer_phone' string='Телефон на работодателя'/>
								<field name='employer_email' string='Имейл на работодателя'/>
								<field name='employer_country' string='Държава'/>
								<field name='employer_county' string='Област'/>
								<field name='employer_ekatte' string='ЕКАТТЕ код'/>
								<field name='employer_city' string='Град'/>
								<field name='employer_line' string='Адрес'/>
								<field name='employer_postalCode' string='Пощенски код'/>
								<field name='attached_documents_type' string='Тип на документа'/>
								<field name='attached_documents_date' string='Дата на документа'/>
								<field name='attached_documents_number' string='Номер на документа'/>
								<field name='attached_documents_isNrn' string='Е НРН?'/>
								<field name='attached_documents_note' string='Бележка към документа'/>
							</group>
						</div>
					</sheet>
				</form>
			</field>
		</record>

		<!-- Search Views -->
		<record model="ir.ui.view" id="view_trinity_referral_issue_template_search">
			<field name="name">trinity.referral.issue.template.search</field>
			<field name="model">trinity.referral.issue.template</field>
			<field name="arch" type="xml">
				<search string="template">
					<field name='name' string='Име на шаблон'/>
					<field name='referral_issue_id' string='Създаден от направление'/>
					<field name='referral_category' string='Категория направление'/>
					<field name='referral_type' string='Тип направление'/>
					<field name='referral_qualification' string='Специалност'/>
					<field name='laboratory_code_root' string='Лабораторен код'/>
					<field name='specializedActivities_code_root' string='Специализирана дейност'/>
					<group expand="0" string="Групирай по">
						<filter string="Категория" name="group_category" context="{'group_by': 'referral_category'}"/>
						<filter string="Тип направление" name="group_type" context="{'group_by': 'referral_type'}"/>
						<filter string="Специалност" name="group_qualification" context="{'group_by': 'referral_qualification'}"/>
					</group>
				</search>
			</field>
		</record>

		<!-- Actions to Return Model Views -->
		<record model="ir.actions.act_window" id="action_trinity_referral_issue_template">
			<field name="name">Шаблони за направления</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">trinity.referral.issue.template</field>
			<field name="view_mode">list,form</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					Създайте шаблони за направления
				</p>
			</field>
		</record>

		<!-- Menu Items -->
		<menuitem name="Шаблони за направления" id="menu_referral_template" parent="menu_referral_parent" action="action_trinity_referral_issue_template" sequence="40"/>
	</data>
</odoo>
