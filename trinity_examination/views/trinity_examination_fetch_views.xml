<odoo>
	<data>
		<!-- List Views -->
		<record model="ir.ui.view" id="view_trinity_examination_fetch_list">
			<field name="name">trinity.examination.fetch.list</field>
			<field name="model">trinity.examination.fetch</field>
			<field name="arch" type="xml">
				<list>
                    <field name="fetch_search_method"/>
					<field name="main_dr_performing_doctor_id" optional="show"/>
					<field name="fetch_nrnExamination" optional="show"/>
					<field name="fetch_lrn" optional="show"/>
					<field name="fetch_identifier_type" optional="show"/>
					<field name="fetch_identifier" optional="show"/>
					<field name="fetch_given_name" optional="hide"/>
					<field name="fetch_middle_name" optional="hide"/>
					<field name="fetch_family_name" optional="hide"/>
					<field name="fetch_fromDate" optional="show"/>
					<field name="X006" optional="hide"/>
				</list>
			</field>
		</record>
		<!-- Form Views -->
		<record model="ir.ui.view" id="view_trinity_examination_fetch_form">
			<field name="name">trinity.examination.fetch.form</field>
			<field name="model">trinity.examination.fetch</field>
			<field name="arch" type="xml">
				<form>
					<style>
					.o_form_view .o_form_sheet_bg {
						margin: 0 auto !important;
					}
					</style>
					<link rel="stylesheet" type="text/css" href="/trinity_file_assets/static/src/css/custom.css"/>
					<link rel="stylesheet" type="text/css" href="/trinity_file_assets/static/src/css/remove_control_panel.css"/>
					<sheet>
						<div style="display: flex; justify-content: right;">
							<div invisible="not user_token_is_expired">
								<button name="getToken" string="Изгради връзка с НЗИС" type="object" class="btn btn-outline-danger btn-sm" onclick="getToken()"/>
							</div>
							<div invisible="user_token_is_expired">
								<button name="getSignatureX005" string="Изпрати към НЗИС" type="object" class="btn btn-outline-primary btn-sm" onclick="getSignatureX005()"/>
							</div>
						</div>
						<div class="oe_title">
							<h1 invisible="X006 == True">Изтегли направление от НЗИС</h1>
						</div>
                        <div class="row">
                            <group class="col-lg-6">
                                <separator class="col-lg-12 separator" />
                                <field name="fetch_search_method" widget="radio" />
                            </group>
                            <group class="col-lg-6" invisible="fetch_search_method != 'nrn'">
                                <separator class="col-lg-12 separator" />
                                <field name="fetch_nrnExamination" widget="input" placeholder="НРН на прегледа"/>
                            </group>
                            <group class="col-lg-6" invisible="fetch_search_method != 'lrn_date'">
                                <separator class="col-lg-12 separator" />
                                <field name="fetch_lrn" widget="input" placeholder="LRN на е-прегледа"/>
                                <field name="fetch_fromDate" widget="date" placeholder="Дата на отваряне на е-прегледа"/>
                            </group>
                            <group class="col-lg-6" invisible="fetch_search_method != 'identifier_date'">
                                <separator class="col-lg-12 separator" />
                                <field name="fetch_identifier_type" widget="input" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
                                <field name="fetch_identifier" widget="input" placeholder="Идентификатор на пациента"/>
                                <field name="fetch_fromDate" widget="date" placeholder="Дата на отваряне на е-прегледа"/>
                            </group>
                            <group class="col-lg-6" invisible="fetch_search_method != 'names_date'">
                                <separator class="col-lg-12 separator" />
                                <field name="fetch_given_name" widget="input" placeholder="Име"/>
                                <field name="fetch_middle_name" widget="input" placeholder="Презиме"/>
                                <field name="fetch_family_name" widget="input" placeholder="Фамилия"/>
                                <field name="fetch_fromDate" widget="date" placeholder="Дата на отваряне на е-прегледа"/>
                            </group>
                            <group class="col-lg-12">
                                <separator class="col-lg-12 separator" />
                                <field name="X006" id="X006" widget="text"/>
                            </group>
                        </div>
						<group class='col-lg-12 d-none'>
							<field name="X005" id="X005" widget="text"/>
							<field name="X006" id="X006" widget="text"/>
							<field name="X006_raw" id="X006_raw" widget="text"/>
							<field name="SignedInfo_X005" id="SignedInfo_X005" widget="text"/>
							<field name="SignedInfo_X005_signature" id="SignedInfo_X005_signature" widget="text"/>
							<field name="user_token_certificate" id="user_token_certificate" widget="text"/>
							<field name="supermed_certificate" id="supermed_certificate" widget="text"/>
							<field name="X005_signed" id="X005_signed"/>

							<field name="tokenRequest" id="tokenRequest" widget="text"/>
							<field name="SignedInfo_tokenRequest" id="SignedInfo_tokenRequest" widget="text"/>
							<field name="SignedInfo_tokenRequest_signature" id="SignedInfo_tokenRequest_signature" widget="text"/>
							<field name="tokenRequest_signed" id="tokenRequest_signed" widget="text"/>
							<field name="tokenResponse" id="tokenResponse" widget="text"/>
							<field name="user_token_expiresOnDatetime"/>
							<field name="user_token_is_expired" id="user_token_is_expired"/>
						</group>
						<group class='col-lg-12 d-none'>
							<button name="X005_api_request" type="object"/>
							<button name="post_token_api_request" type="object"/>
						</group>
					</sheet>
				<script type="text/javascript" src="/trinity_file_assets/static/src/js/getToken.js"></script>
				<script type="text/javascript" src="/trinity_file_assets/static/src/js/getSignature.js"></script>
				<script type="text/javascript" src="/trinity_file_assets/static/src/js/getSignatureNhifMessages.js"></script>
				</form>
			</field>
		</record>
		<!-- Actions to Return Model Views -->
		<record model="ir.actions.act_window" id="action_trinity_examination_fetch_form">
			<field name="name"></field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">trinity.examination.fetch</field>
            <field name="view_mode">form</field>
			<field name="target">current</field>
		</record>
		<record model="ir.actions.act_window" id="action_trinity_examination_fetch">
			<field name="name">Изтеглени прегледи</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">trinity.examination.fetch</field>
            <field name="view_mode">list,form</field>
			<field name="target">current</field>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face"/>
			</field>
		</record>
		<!-- Menu Items -->
		<menuitem action="action_trinity_examination_fetch" id="menu_report_fetch" name="Изтегли преглед" parent="menu_report_parent" sequence="80"/>
	</data>
</odoo>
